# üìÅ Deployment Files Reference

This document lists all deployment-related files in this repository and their purpose.

## Configuration Files

### Platform-Specific Configurations

| File | Platform | Purpose |
|------|----------|---------|
| `render.yaml` | Render.com | Service configuration for automatic deployment |
| `Procfile` | Heroku | Defines how to run the app on Heroku |
| `railway.json` | Railway.app | Configuration for Railway deployments |
| `vercel.json` | Vercel | Serverless configuration for Vercel |
| `Dockerfile` | Docker | Container configuration for Docker deployments |
| `.dockerignore` | Docker | Files to exclude from Docker image |

### Runtime & Dependencies

| File | Purpose |
|------|---------|
| `runtime.txt` | Specifies Python version (3.12.3) for Heroku/Render |
| `requirements.txt` | Python dependencies for all platforms |

## Documentation Files

| File | Purpose |
|------|---------|
| `DEPLOYMENT.md` | Comprehensive deployment guide for all platforms |
| `QUICK_DEPLOY.md` | 5-minute quick start guide for Render.com |
| `POST_DEPLOYMENT_CHECKLIST.md` | Post-deployment testing checklist |
| `DEPLOYMENT_FILES.md` | This file - reference for all deployment files |

## Helper Scripts

| File | Purpose |
|------|---------|
| `start.sh` | Quick start script for local development |

## Environment Files

| File | Purpose |
|------|---------|
| `.env.example` | Template for environment variables |
| `.env` | Your local environment variables (in .gitignore) |

---

## Quick Reference: Which File for Which Platform?

### Render.com
**Required**: `render.yaml`, `requirements.txt`
**Optional**: `runtime.txt`

The `render.yaml` file configures everything automatically!

### Heroku
**Required**: `Procfile`, `requirements.txt`, `runtime.txt`
**Optional**: None

Use Heroku CLI or GitHub integration in dashboard.

### Railway.app
**Required**: `requirements.txt`
**Optional**: `railway.json` (provides better configuration)

Railway auto-detects Python apps.

### Vercel
**Required**: `vercel.json`, `requirements.txt`
**Optional**: None

Serverless deployment with edge functions.

### Docker (Any Platform)
**Required**: `Dockerfile`, `requirements.txt`
**Optional**: `.dockerignore` (optimizes builds)

Works with: Google Cloud Run, AWS ECS, Azure ACI, DigitalOcean, etc.

---

## File Contents Overview

### render.yaml
```yaml
services:
  - type: web
    name: troll-tove-app
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn -w 4 -b 0.0.0.0:$PORT app:app
    envVars:
      - key: SECRET_KEY
        generateValue: true
      - key: FLASK_DEBUG
        value: false
    healthCheckPath: /health
```

### Procfile
```
web: gunicorn -w 4 -b 0.0.0.0:$PORT app:app
```

### runtime.txt
```
python-3.12.3
```

### railway.json
```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "gunicorn -w 4 -b 0.0.0.0:$PORT app:app",
    "healthcheckPath": "/health",
    "restartPolicyType": "ON_FAILURE"
  }
}
```

---

## Environment Variables Needed

All platforms need these:

### Required
- `SECRET_KEY`: Flask session secret (auto-generated by Render, or use: `python -c "import secrets; print(secrets.token_hex(32))"`)
- `FLASK_DEBUG`: Set to `false` for production

### Optional
- `API_FOOTBALL_KEY`: For future football API integration
- `PORT`: Usually set automatically by platform

---

## Modifying Configurations

### Change Python Version
Update in:
- `runtime.txt`: Change `python-3.12.3` to desired version
- `render.yaml`: Update `PYTHON_VERSION` env var (if specified)
- `Dockerfile`: Change `FROM python:3.12-slim` to desired version

### Change Number of Workers
In all start commands, change `-w 4` to desired number:
- `render.yaml`: `startCommand`
- `Procfile`: web command
- `railway.json`: `startCommand`
- `Dockerfile`: CMD instruction

Recommended: Number of CPU cores √ó 2 + 1

### Add New Environment Variable
1. Add to `.env.example` as template
2. Add to each platform's environment variables section
3. Update `DEPLOYMENT.md` documentation

---

## Testing Configurations Locally

### Test Procfile locally:
```bash
gunicorn -w 4 -b 0.0.0.0:8000 app:app
```

### Test Docker locally:
```bash
docker build -t troll-tove-app .
docker run -p 8000:8000 \
  -e SECRET_KEY=test-key \
  -e FLASK_DEBUG=false \
  troll-tove-app
```

### Validate YAML files:
```bash
python -c "import yaml; yaml.safe_load(open('render.yaml'))"
```

### Validate JSON files:
```bash
python -m json.tool railway.json
python -m json.tool vercel.json
```

---

## Need Help?

- **Quick start**: See [QUICK_DEPLOY.md](QUICK_DEPLOY.md)
- **Detailed guides**: See [DEPLOYMENT.md](DEPLOYMENT.md)
- **Post-deployment testing**: See [POST_DEPLOYMENT_CHECKLIST.md](POST_DEPLOYMENT_CHECKLIST.md)
- **Local development**: Run `./start.sh`

---

**Last Updated**: 2026-01-11
**Maintained by**: Repository contributors
